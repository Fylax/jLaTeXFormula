/* 
 * Copyright (C) 2014 Nico Caprioli
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
window.onload = function () {
    var symbols = [
        [
            "pm",
            "cap",
            "diamond",
            "oplus",
            "mp",
            "cup",
            "bigtriangleup",
            "ominus",
            "times",
            "uplus",
            "bigtriangledown",
            "otimes",
            "div",
            "sqcap",
            "triangleleft",
            "oslash",
            "ast",
            "sqcup",
            "triangleright",
            "odot",
            "star",
            "vee",
            "bigcirc",
            "circ",
            "wedge",
            "dagger",
            "bullet",
            "setminus",
            "ddagger",
            "cdot",
            "wr",
            "amalg",
            "leq",
            "geq",
            "equiv",
            "models",
            "prec",
            "succ",
            "sim",
            "perp",
            "preceq",
            "succeq",
            "simeq",
            "mid",
            "ll",
            "gg",
            "asymp",
            "parallel",
            "subset",
            "supset",
            "approx",
            "bowtie",
            "subseteq",
            "supseteq",
            "cong",
            "neq",
            "smile",
            "sqsubseteq",
            "sqsupseteq",
            "doteq",
            "frown",
            "in",
            "ni",
            "propto",
            "vdash",
            "dashv",
            "sum_{i=0}^{+\\infty}",
            "bigcap_{a}^{b}",
            "bigcup_{a}^{b}",
            "bigoplus",
            "bigodot",
            "bigotimes",
            "prod_{i=0}^{+\\infty}",
            "coprod_{i=0}^{+\\infty}",
            "bigsqcup",
            "bigwedge",
            "bigvee",
            "biguplus",
            "int_{a}^{b}",
            "iint_{a}^{b}",
            "iiint_{a}^{b}",
            "iiiint",
            "idotsint",
            "oint_{\\gamma}",
            //"varoint_{\\gamma}",
            //"dotsint",
            //"fint",
            //"landdownint",
            //"landupint",
            //"oiint",
            //"ointclockwise",
            //"ointctrclockwise",
            //"sqint",
            //"sqiint",
            //"varointclockwise",
            //"varointctrclockwise",
            "leqslant",
            "geqslant",
            "lhd",
            "rhd",
            "unlhd",
            "unrhd",
            "Join",
            "dotplus",
            "smallsetminus",
            "Cap",
            "Cup",
            "barwedge",
            "veebar",
            "doublebarwedge",
            "boxminus",
            "boxtimes",
            "boxdot",
            "boxplus",
            "divideontimes",
            "ltimes",
            "rtimes",
            "leftthreetimes",
            //"righttreetimes",
            "curlywedge",
            "curlyvee",
            "circleddash",
            //"circleddast",
            "circledcirc",
            "centerdot",
            "intercal",
            "leqq",
            //"eqlantless",
            "lesssim",
            "lessapprox",
            "approxeq",
            "lessdot",
            "lll",
            "lessgtr",
            "lesseqgtr",
            "lesseqqgtr",
            "doteqdot",
            "risingdotseq",
            "fallingdotseq",
            "backsim",
            "backsimeq",
            "subseteqq",
            "Subset",
            "preccurlyeq",
            "curlyeqprec",
            "precsim",
            "precapprox",
            "vartriangleleft",
            "trianglelefteq",
            "vDash",
            "Vvdash",
            "smallsmile",
            "smallfrown",
            "bumpeq",
            "Bumpeq",
            "geqq",
            "eqslantgtr",
            "gtrsim",
            "gtrapprox",
            "gtrdot",
            "ggg",
            "gtrless",
            "gtreqless",
            "gtreqqless",
            "eqcirc",
            "circeq",
            "triangleq",
            "thicksim",
            "thickapprox",
            "supseteqq",
            "Supset",
            "succcurlyeq",
            "curlyeqsucc",
            "succsim",
            "succapprox",
            "vartriangleright",
            "trianglerighteq",
            "Vdash",
            "shortmid",
            "shortparallel",
            "between",
            "pitchfork",
            "varpropto",
            "blacktriangleleft",
            "therefore",
            "backepsilon",
            "blacktriangleright",
            "because",
            "nless",
            "nleq",
            "nleqslant",
            "nleqq",
            "lneq",
            "lneqq",
            "lvertneqq",
            "lnsim",
            "lnapprox",
            "nprec",
            "npreceq",
            "precnsim",
            "precnapprox",
            "nsim",
            "nmid",
            "nshortmid",
            "nvdash",
            "nvDash",
            "ntriangleleft",
            "ntrianglelefteq",
            "nsubseteq",
            "subsetneq",
            "subsetneqq",
            "varsubsetneqq",
            "ngtr",
            "ngeq",
            "ngeqslant",
            "ngeqq",
            "gneq",
            "gneqq",
            "gvertneqq",
            "gnsim",
            "gnapprox",
            "nsucc",
            "nsucceq",
            "succnsim",
            "succnapprox",
            "ncong",
            "nparallel",
            "nshortparallel",
            "nVDash",
            "ntriangleright",
            "ntrianglerighteq",
            "nsupseteq",
            "nsupseteqq",
            "supsetneq",
            "varsupsetneq",
            "supsetneqq",
            "varsupsetneqq",
            //"dotcup",
            //"baro",
            //"bbslash",
            //"binampersand",
            //"bindnasrepma",
            //"boxast",
            //"boxbar",
            //"boxbox",
            //"boxbslash",
            //"boxcircle",
            "boxdot"//,
                    //"boxempty",
                    //"boxslash",
                    //"curlyveedownarrow",
                    //"curlyveeuparrow",
                    //"curlywedgedownarrow",
                    //"curlywedgeuparrow",
                    //"fatbslash",
                    //"fatsemi",
                    //"fatslash",
                    //"interleave",
                    //"leftslice",
                    //"merge",
                    //"minuso",
                    //"moo",
                    //"nplus",
                    //"obar",
                    //"oblong",
                    //"obslash",
                    //"ogreaterthan",
                    //"olessthan",
                    //"ovee",
                    //"owedge",
                    //"rightslice",
                    //"sslash",
                    //"talloblong",
                    //"varbigcirc",
                    //"varcurlyvee",
                    //"varcurlywedge",
                    //"varoast",
                    //"varobar",
                    //"varobslash",
                    //"varocircle",
                    //"varodot",
                    //"varogreaterthan",
                    //"varolessthan",
                    //"varominus",
                    //"varoplus",
                    //"varoslash",
                    //"varotimes",
                    //"varovee",
                    //"varowedge",
        ],
        [
            "leftarrow",
            //"longeleftarrow",
            "uparrow",
            "Leftarrow",
            "Longleftarrow",
            "Uparrow",
            "rightarrow",
            "longrightarrow",
            "downarrow",
            "Rightarrow",
            "Longrightarrow",
            "Downarrow",
            "leftrightarrow",
            "longleftrightarrow",
            "updownarrow",
            "Leftrightarrow",
            "Longleftrightarrow",
            "Updownarrow",
            "mapsto",
            "longmapsto",
            "nearrow",
            "hookleftarrow",
            "hookrightarrow",
            "searrow",
            "leftharpoonup",
            "rightharpoonup",
            "swarrow",
            "leftharpoondown",
            "rightharpoondown",
            "nwarrow",
            "leftrightharpoons",
            "dashrightarrow",
            "dashleftarrow",
            "leftleftarrows",
            "leftrightarrows",
            "Lleftarrow",
            "twoheadleftarrow",
            "leftarrowtail",
            "looparrowleft",
            "rightleftharpoons",
            "curvearrowleft",
            "circlearrowleft",
            "Lsh",
            "upuparrows",
            "upharpoonleft",
            "downharpoonright",
            "multimap",
            //"leftrightsquirarrow",
            "rightrightarrows",
            "rightleftarrows",
            //"twoheadrightarrows",
            "rightarrowtail",
            "looparrowright",
            "curvearrowright",
            "circlearrowright",
            "Rsh",
            //"downdownarrow",
            "upharpoonright",
            "downharpoonleft",
            //"rightsquirarrow",
            "nleftarrow",
            "nrightarrow",
            "nLeftarrow",
            "nRightarrow",
            "nleftrightarrow",
            "nLeftrightarrow",
            "leadsto",
            "xleftarrow[xyz]{abc}",
            "xrightarrow[xyz]{abc}"
        ],
        [
            "ldots",
            "cdots",
            "vdots",
            "ddots",
            "aleph",
            "prime",
            "forall",
            "infty",
            "hbar",
            "emptyset",
            "exists",
            "imath",
            "nabla",
            "neg",
            "jmath",
            "surd",
            "flat",
            "triangle",
            "ell",
            "top",
            "natural",
            "clubsuit",
            "wp",
            "bot",
            "sharp",
            "diamondsuit",
            "Re\\left(z \\right )",
            "backslash",
            "heartsuit",
            "Im\\left(z \\right )",
            "angle",
            "partial",
            "spadesuit",
            "hslash",
            "vartriangle",
            "triangledown",
            "square",
            "lozenge",
            "circledS",
            "measuredangle",
            "nexists",
            "mho",
            "Finv",
            "Game",
            "Bbbk",
            "backprime",
            "varnothing",
            "blacktriangle",
            "blacktriangledown",
            "blacksquare",
            "blacklozenge",
            "bigstar",
            "sphericalangle",
            "complement",
            "eth",
            "diagup",
            "diagdown",
            //"laplacian",
            //"varlaplacian",
            //"coloneqq",
            //"Coloneqq",
            "stackrel{\\text{def}}{=}"
        ],
        [
            "vert",
            "Vert",
            "lbrace",
            "rbrace",
            "lfloor",
            "rfloor",
            "lceil",
            "rceil",
            "langle",
            "rangle",
            "overbrace{xyz}",
            "underbrace{xyz}",
            "overline{xyz}",
            "underline{xyz}",
            "overleftarrow{xyz}",
            "overrightarrow{xyz}",
            "widehat{xyz}",
            "widetilde{xyz}",
            "ulcorner",
            "urcorner",
            "llcorner",
            //"rrcorner",
            "lmoustache",
            "rmoustache",
            "lgroup",
            "rgroup",
            "arrowvert",
            "Arrowvert",
            "bracevert",
            "sqrt{xyz}",
            "sqrt[n]{xyz}",
            //"abs{x}",
            "bar{a}",
            "vec{a}",
            "dot{a}",
            "ddot{a}",
            "hat{a}",
            "check{a}",
            "breve{a}",
            "tilde{a}",
            "acute{a}",
            "grave{a}"//,
                    //"ket{\\psi}",
                    //"bra{\\psi}",
                    //"braket{\\phi}{\\psi}",
                    //"matrixel{\\phi}{H}{\\psi}",
                    //"slashed{a}"
        ],
        [
            "alpha",
            "beta",
            "gamma",
            "delta",
            "epsilon",
            "varepsilon",
            "zeta",
            "eta",
            "theta",
            "vartheta",
            "iota",
            "kappa",
            "lambda",
            "mu",
            "nu",
            "xi",
            "pi",
            "varpi",
            "rho",
            "varrho",
            "sigma",
            "varsigma",
            "tau",
            "upsilon",
            "phi",
            "varphi",
            "chi",
            "psi",
            "omega",
            "Gamma",
            "Delta",
            "Theta",
            "Lambda",
            "Xi",
            "Pi",
            "Sigma",
            "Upsilon",
            "Phi",
            "Psi",
            "Omega"
        ],
        [
            "\\a^{b}",
            "\\a_{b}",
            "\\a_{b}^{c}",
            "frac{a}{b}",
            "binom{a}{b}",
            "sin{x}",
            "cos{x}",
            "tan{x}",
            "cot{x}",
            "sec{x}",
            "csc{x}",
            "sinh{x}",
            "cosh{x}",
            "tanh{x}",
            "coth{x}",
            "lim_{x \\to 0}f(x)",
            "limsup_{x \\to 0}f(x)",
            "liminf_{x \\to 0}f(x)",
            "sup_{x \\in A}f(x)",
            "inf_{x \\in A}f(x)",
            "min_{x \\in A}f(x)",
            "max_{x \\in A}f(x)",
            "log{x}",
            "ln{x}",
            "lg{x}",
            "log_{n}{x}",
            "exp{x}",
            "arcsin{x}",
            "arccos{x}",
            "arctan{x}",
            "ker{x}",
            "deg{x}",
            "gcd{x}",
            "Pr{x}",
            "det{x}",
            "hom{x}",
            "arg{x}",
            "dim{x}"
        ],
        [
            "begin{matrix}\n1 & 2 \\\\\n3 & 4\n\\end{matrix}",
            "begin{bmatrix}\n1 & 2 \\\\\n3 & 4\n\\end{bmatrix}",
            "begin{pmatrix}\n1 & 2 \\\\\n3 & 4\n\\end{pmatrix}",
            "left(\\begin{smallmatrix}\n1 & 2 \\\\\n3 & 4\n\\end{smallmatrix}\\right)",
            "begin{cases}\nx=2 \\\\\ny=3\n\\end{cases}",
            "begin{vmatrix}\n1 & 2 \\\\\n3 & 4\n\\end{vmatrix}",
            "begin{Bmatrix}\n1 & 2 \\\\\n3 & 4\n\\end{Bmatrix}",
            "begin{Vmatrix}\n1 & 2 \\\\\n3 & 4\n\\end{Vmatrix}"
        ],
        [
            "mathcal{A}",
            "mathcal{B}",
            "mathcal{C}",
            "mathcal{D}",
            "mathcal{E}",
            "mathcal{F}",
            "mathcal{G}",
            "mathcal{H}",
            "mathcal{I}",
            "mathcal{J}",
            "mathcal{K}",
            "mathcal{L}",
            "mathcal{M}",
            "mathcal{N}",
            "mathcal{O}",
            "mathcal{P}",
            "mathcal{Q}",
            "mathcal{R}",
            "mathcal{S}",
            "mathcal{T}",
            "mathcal{U}",
            "mathcal{V}",
            "mathcal{W}",
            "mathcal{X}",
            "mathcal{Y}",
            "mathcal{Z}",
            "mathscr{A}",
            "mathscr{B}",
            "mathscr{C}",
            "mathscr{D}",
            "mathscr{E}",
            "mathscr{F}",
            "mathscr{G}",
            "mathscr{H}",
            "mathscr{I}",
            "mathscr{J}",
            "mathscr{K}",
            "mathscr{L}",
            "mathscr{M}",
            "mathscr{N}",
            "mathscr{O}",
            "mathscr{P}",
            "mathscr{Q}",
            "mathscr{R}",
            "mathscr{S}",
            "mathscr{T}",
            "mathscr{U}",
            "mathscr{V}",
            "mathscr{W}",
            "mathscr{X}",
            "mathscr{Y}",
            "mathscr{Z}",
            "mathbb{A}",
            "mathbb{B}",
            "mathbb{C}",
            "mathbb{D}",
            "mathbb{E}",
            "mathbb{F}",
            "mathbb{G}",
            "mathbb{H}",
            "mathbb{I}",
            "mathbb{J}",
            "mathbb{K}",
            "mathbb{L}",
            "mathbb{M}",
            "mathbb{N}",
            "mathbb{O}",
            "mathbb{P}",
            "mathbb{Q}",
            "mathbb{R}",
            "mathbb{S}",
            "mathbb{T}",
            "mathbb{U}",
            "mathbb{V}",
            "mathbb{W}",
            "mathbb{X}",
            "mathbb{Y}",
            "mathbb{Z}",
            "mathbf{A}",
            "mathbf{B}",
            "mathbf{C}",
            "mathbf{D}",
            "mathbf{E}",
            "mathbf{F}",
            "mathbf{G}",
            "mathbf{H}",
            "mathbf{I}",
            "mathbf{J}",
            "mathbf{K}",
            "mathbf{L}",
            "mathbf{M}",
            "mathbf{N}",
            "mathbf{O}",
            "mathbf{P}",
            "mathbf{Q}",
            "mathbf{R}",
            "mathbf{S}",
            "mathbf{T}",
            "mathbf{U}",
            "mathbf{V}",
            "mathbf{W}",
            "mathbf{X}",
            "mathbf{Y}",
            "mathbf{Z}",
            "mathfrak{A}",
            "mathfrak{B}",
            "mathfrak{C}",
            "mathfrak{D}",
            "mathfrak{E}",
            "mathfrak{F}",
            "mathfrak{G}",
            "mathfrak{H}",
            "mathfrak{I}",
            "mathfrak{J}",
            "mathfrak{K}",
            "mathfrak{L}",
            "mathfrak{M}",
            "mathfrak{N}",
            "mathfrak{O}",
            "mathfrak{P}",
            "mathfrak{Q}",
            "mathfrak{R}",
            "mathfrak{S}",
            "mathfrak{T}",
            "mathfrak{U}",
            "mathfrak{V}",
            "mathfrak{W}",
            "mathfrak{X}",
            "mathfrak{Y}",
            "mathfrak{Z}",
            "text{[regular text]}",
            "boldsymbol{[bold\ symbol]}",
            "textit{[Italic Text]}"
        ]
    ],
            i = 0,
            formula_container = document.getElementById("formula-container"),
            group_select = document.getElementById("group-select");
    for (; i < symbols.length; ++i) {
        var j = 0,
                btn;
        for (; j < symbols[i].length; ++j) {
            btn = document.getElementById("symbols-" + i).appendChild(document.createElement("button"));
            btn.setAttribute("data-formula", symbols[i][j]);
            btn.className = "formula-btn group-" + i;
            btn.onclick = function () {
                formula_container.value = (this.getAttribute("data-formula")[0] === "\\") ? formula_container.value + this.getAttribute("data-formula").substring(1) : formula_container.value + "\\" + this.getAttribute("data-formula");
                formula_container.onkeyup();
            };
            btn.innerHTML = (symbols[i][j][0] === "\\") ? "{tex}" + symbols[i][j].substring(1) + "{/tex}" : "{tex}\\" + symbols[i][j] + "{/tex}";
        }
    }
    delete symbols;
    formula_container.value = "";
    formula_container.onkeyup = function () {
        document.getElementById("rendered-container").innerHTML = "{tex}" + formula_container.value + "{/tex}";
        MathJax.Hub.Typeset();
    };
    group_select.onchange = function () {
        var i = 0;
        for (; i < group_select.length; ++i) {
            var group = document.getElementById("symbols-" + i);
            group.style.display = (i === group_select.selectedIndex) ? "" : "none";
        }
    };
};
